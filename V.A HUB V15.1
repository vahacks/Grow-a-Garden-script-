--// V.A Hackz v14.7 Ultimate | KRNL-ready | Password Protected
-- All requested external loaders included (ZysumeHub + others)

if game.CoreGui:FindFirstChild("VA_Main") then
    game.CoreGui.VA_Main:Destroy()
end

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

if not player then
    warn("[VA Hackz] LocalPlayer is nil. Run as local script (KRNL).")
    return
end

-- CONFIG
local VERSION = "v14.7"
local PASSWORD = "Kupal"
local UNLOCKED = false
local COUNTER_NAMESPACE = "va-hackz"
local COUNTER_KEY = "v14_7"
local FEEDBACK_LINK = "https://www.facebook.com/ryan.tanala.337976"

-- GUI ROOT
local gui = Instance.new("ScreenGui")
gui.Name = "ZysumeHub"
gui.ResetOnSpawn = false
local playerGui = player:FindFirstChild("PlayerGui") or player:WaitForChild("PlayerGui",5)
if playerGui then gui.Parent = playerGui else pcall(function() gui.Parent = game.CoreGui end) end

-- FLOATING CIRCULAR BUTTON
local floatingBtn = Instance.new("TextButton")
floatingBtn.Size = UDim2.new(0,64,0,64)
floatingBtn.Position = UDim2.new(0,18,0.5,-32)
floatingBtn.BackgroundColor3 = Color3.fromRGB(30,30,30)
floatingBtn.Text = "V.A"
floatingBtn.Font = Enum.Font.GothamBold
floatingBtn.TextSize = 20
floatingBtn.TextScaled = true
floatingBtn.TextColor3 = Color3.new(1,1,1)
floatingBtn.Parent = gui
floatingBtn.Active = true
floatingBtn.Draggable = true
floatingBtn.ZIndex = 10
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0.5,0)
corner.Parent = floatingBtn
local shadow = Instance.new("UICorner") -- optional extra aesthetic
shadow.CornerRadius = UDim.new(0.5,0)

-- MAIN FRAME
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0,460,0,700)
mainFrame.Position = UDim2.new(0.5,-230,0.5,-350)
mainFrame.BackgroundColor3 = Color3.fromRGB(25,25,25)
mainFrame.Parent = gui
mainFrame.Visible = false
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.ZIndex = 9

local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1,0,0,44)
title.Position = UDim2.new(0,0,0,0)
title.BackgroundTransparency = 0.2
title.Text = "V.A Hackz "..VERSION.." (Locked)"
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextColor3 = Color3.new(1,1,1)
title.BackgroundColor3 = Color3.fromRGB(18,18,18)

-- USERS COUNTER
local usersLabel = Instance.new("TextLabel", mainFrame)
usersLabel.Size = UDim2.new(0.46,0,0,30)
usersLabel.Position = UDim2.new(0.02,0,0,52)
usersLabel.BackgroundTransparency = 1
usersLabel.Font = Enum.Font.Gotham
usersLabel.TextSize = 16
usersLabel.TextColor3 = Color3.new(1,1,1)
usersLabel.Text = "Users: --"

-- REFRESH & FEEDBACK buttons
local refreshBtn = Instance.new("TextButton", mainFrame)
refreshBtn.Size = UDim2.new(0.24,0,0,28)
refreshBtn.Position = UDim2.new(0.50,0,0,52)
refreshBtn.BackgroundColor3 = Color3.fromRGB(80,80,80)
refreshBtn.Font = Enum.Font.Gotham
refreshBtn.TextSize = 14
refreshBtn.TextColor3 = Color3.new(1,1,1)
refreshBtn.Text = "Refresh Users"
refreshBtn.ZIndex = 9

local feedbackBtn = Instance.new("TextButton", mainFrame)
feedbackBtn.Size = UDim2.new(0.24,0,0,28)
feedbackBtn.Position = UDim2.new(0.76,0,0,52)
feedbackBtn.BackgroundColor3 = Color3.fromRGB(70,120,200)
feedbackBtn.Font = Enum.Font.Gotham
feedbackBtn.TextSize = 14
feedbackBtn.TextColor3 = Color3.new(1,1,1)
feedbackBtn.Text = "Feedback"
feedbackBtn.ZIndex = 9

-- LOG BOX
local logBox = Instance.new("TextBox", mainFrame)
logBox.Size = UDim2.new(1,-24,0,200)
logBox.Position = UDim2.new(0,12,0,480)
logBox.BackgroundColor3 = Color3.fromRGB(12,12,12)
logBox.TextColor3 = Color3.new(1,1,1)
logBox.TextSize = 14
logBox.Font = Enum.Font.Code
logBox.MultiLine = true
logBox.TextWrapped = true
logBox.ClearTextOnFocus = false
logBox.TextXAlignment = Enum.TextXAlignment.Left
logBox.TextYAlignment = Enum.TextYAlignment.Top
logBox.Text = "[LOG] (Locked) Enter password to unlock..."
logBox.ZIndex = 9
logBox.TextEditable = false

local function appendLog(txt)
    if not logBox or not logBox.Parent then
        warn("[VA] "..tostring(txt))
        return
    end
    logBox.Text = logBox.Text .. "\n" .. tostring(txt)
end

-- JSON safe decode
local function safeDecode(json)
    local ok,res = pcall(function() return HttpService:JSONDecode(json) end)
    if ok then return res end
    return nil
end

-- COUNTER FUNCTION (CountAPI)
local function updateCounter(hit)
    task.spawn(function()
        local url = "https://api.countapi.xyz/get/"..COUNTER_NAMESPACE.."/"..COUNTER_KEY
        if hit then
            url = "https://api.countapi.xyz/hit/"..COUNTER_NAMESPACE.."/"..COUNTER_KEY
        end
        local ok, resp = pcall(function() return game:HttpGet(url) end)
        if not ok or not resp then
            appendLog("[Counter] HTTP request failed: "..tostring(resp))
            usersLabel.Text = "Users: ?"
            return
        end
        local data = safeDecode(resp)
        if data and (data.value or data.count) then
            local val = data.value or data.count
            usersLabel.Text = "Users: "..tostring(val)
            appendLog("[Counter] Current users: "..tostring(val))
        else
            appendLog("[Counter] Unexpected response: "..tostring(resp))
            usersLabel.Text = "Users: ?"
        end
    end)
end

refreshBtn.MouseButton1Click:Connect(function()
    updateCounter(false)
end)

feedbackBtn.MouseButton1Click:Connect(function()
    local ok,err = pcall(function() if setclipboard then setclipboard(FEEDBACK_LINK) end end)
    if ok then
        appendLog("[Feedback] Link copied to clipboard: "..FEEDBACK_LINK)
        local popup = Instance.new("TextLabel", mainFrame)
        popup.Size = UDim2.new(0.6,0,0,28)
        popup.Position = UDim2.new(0.2,0,0,92)
        popup.BackgroundColor3 = Color3.fromRGB(25,25,25)
        popup.BorderSizePixel = 1
        popup.Font = Enum.Font.Gotham
        popup.TextSize = 14
        popup.TextColor3 = Color3.new(1,1,1)
        popup.Text = "Feedback link copied!"
        popup.ZIndex = 60
        task.spawn(function() task.wait(2.8) if popup and popup.Parent then popup:Destroy() end end)
    else
        appendLog("[Feedback] Failed to copy link: "..tostring(err))
    end
end)

-- CLOSE BUTTON
local closeBtn = Instance.new("TextButton", mainFrame)
closeBtn.Size = UDim2.new(0,34,0,34)
closeBtn.Position = UDim2.new(1,-40,0,6)
closeBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.ZIndex = 9
closeBtn.MouseButton1Click:Connect(function() mainFrame.Visible = false end)

-- PASSWORD MODAL
local function createPasswordPrompt()
    if gui:FindFirstChild("VA_PasswordModal") then return end
    local modal = Instance.new("Frame", gui)
    modal.Size = UDim2.new(1,0,1,0)
    modal.Position = UDim2.new(0,0,0,0)
    modal.BackgroundTransparency = 0.6
    modal.BackgroundColor3 = Color3.new(0,0,0)
    modal.ZIndex = 50
    modal.Name = "VA_PasswordModal"

    local frame = Instance.new("Frame", modal)
    frame.Size = UDim2.new(0,360,0,180)
    frame.Position = UDim2.new(0.5,-180,0.5,-90)
    frame.BackgroundColor3 = Color3.fromRGB(35,35,35)
    frame.BorderSizePixel = 0
    frame.ZIndex = 51

    local lbl = Instance.new("TextLabel", frame)
    lbl.Size = UDim2.new(1,0,0,44)
    lbl.Position = UDim2.new(0,0,0,0)
    lbl.BackgroundColor3 = Color3.fromRGB(20,120,20)
    lbl.Font = Enum.Font.GothamBold
    lbl.TextSize = 18
    lbl.TextColor3 = Color3.new(1,1,1)
    lbl.Text = "Enter Access Password"

    local input = Instance.new("TextBox", frame)
    input.Size = UDim2.new(0.84,0,0,40)
    input.Position = UDim2.new(0.08,0,0,56)
    input.PlaceholderText = "Password"
    input.Font = Enum.Font.Gotham
    input.TextSize = 18
    input.BackgroundColor3 = Color3.fromRGB(45,45,45)
    input.TextColor3 = Color3.new(1,1,1)
    input.ClearTextOnFocus = false
    input.ZIndex = 52
    input.Name = "PasswordBox"

    local status = Instance.new("TextLabel", frame)
    status.Size = UDim2.new(1,0,0,24)
    status.Position = UDim2.new(0,0,0,104)
    status.BackgroundTransparency = 1
    status.Font = Enum.Font.Gotham
    status.TextSize = 14
    status.TextColor3 = Color3.fromRGB(255,120,120)
    status.Text = ""

    local btnApply = Instance.new("TextButton", frame)
    btnApply.Size = UDim2.new(0.42,0,0,36)
    btnApply.Position = UDim2.new(0.06,0,0,130)
    btnApply.BackgroundColor3 = Color3.fromRGB(0,170,0)
    btnApply.Text = "Submit"
    btnApply.Font = Enum.Font.GothamBold
    btnApply.TextSize = 16

    local btnCancel = Instance.new("TextButton", frame)
    btnCancel.Size = UDim2.new(0.42,0,0,36)
    btnCancel.Position = UDim2.new(0.52,0,0,130)
    btnCancel.BackgroundColor3 = Color3.fromRGB(170,50,50)
    btnCancel.Text = "Cancel"
    btnCancel.Font = Enum.Font.GothamBold
    btnCancel.TextSize = 16

    local function submit()
        local text = tostring(input.Text or "")
        if text == PASSWORD then
            UNLOCKED = true
            appendLog("[System] Password correct. Menu unlocked.")
            status.TextColor3 = Color3.fromRGB(120,255,120)
            status.Text = "Access Granted ✅"
            task.wait(0.6)
            if frame and frame.Parent then frame.Parent:Destroy() end
            title.Text = "V.A Hackz "..VERSION.." (Unlocked)"
            mainFrame.Visible = true
            logBox.Text = "[LOG] Unlocked. All features available."
        else
            status.TextColor3 = Color3.fromRGB(255,120,120)
            status.Text = "Invalid password ❌"
            appendLog("[System] Invalid password attempt.")
            input.Text = ""
        end
    end

    btnApply.MouseButton1Click:Connect(submit)
    btnCancel.MouseButton1Click:Connect(function() if modal and modal.Parent then modal:Destroy() end end)
    input.FocusLost:Connect(function(enterPressed) if enterPressed then submit() end end)
end

local function showPasswordPrompt()
    if UNLOCKED then
        mainFrame.Visible = not mainFrame.Visible
        return
    end
    if gui:FindFirstChild("VA_PasswordModal") then return end
    createPasswordPrompt()
end

-- DYNAMIC BACKGROUND (only when visible)
local hue = 0
local speed = 0.5
RunService.RenderStepped:Connect(function(dt)
    hue = (hue + dt*speed) % 1
    if mainFrame and mainFrame.Parent and mainFrame.Visible then
        mainFrame.BackgroundColor3 = mainFrame.BackgroundColor3:Lerp(Color3.fromHSV(hue,0.7,0.8), 0.08)
    end
end)

-- BUTTON CREATION HELPER
local buttonCounter = 0
local function createButton(text, color, callback)
    buttonCounter = buttonCounter + 1
    local btn = Instance.new("TextButton", mainFrame)
    btn.Size = UDim2.new(0.9,0,0,40)
    btn.Position = UDim2.new(0.05,0,0,120 + (buttonCounter-1)*48)
    btn.BackgroundColor3 = color or Color3.fromRGB(50,50,50)
    btn.Text = text
    btn.TextColor3 = Color3.new(1,1,1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    btn.ZIndex = 9

    btn.MouseButton1Click:Connect(function()
        if not UNLOCKED then
            appendLog("[System] Feature locked. Enter password first.")
            showPasswordPrompt()
            return
        end
        local s, e = pcall(function() callback(btn) end)
        if not s then appendLog("[Error] Callback error: "..tostring(e)) end
    end)

    local hoverTween, leaveTween
    local offset = math.random()
    btn.MouseEnter:Connect(function()
        if leaveTween then pcall(function() leaveTween:Cancel() end) end
        hoverTween = TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromHSV((hue+offset)%1,0.7,0.9)})
        hoverTween:Play()
    end)
    btn.MouseLeave:Connect(function()
        if hoverTween then pcall(function() hoverTween:Cancel() end) end
        leaveTween = TweenService:Create(btn, TweenInfo.new(0.25), {BackgroundColor3 = color})
        leaveTween:Play()
    end)

    return btn
end

-- MENU TOGGLE
floatingBtn.MouseButton1Click:Connect(function()
    if UNLOCKED then mainFrame.Visible = not mainFrame.Visible else showPasswordPrompt() end
end)

player.Chatted:Connect(function(msg)
    if not msg then return end
    local s = msg:upper():gsub("%s+","")
    if s == "VAHACKZ" or s == "ZYSUMEHUB" then
        if UNLOCKED then mainFrame.Visible = not mainFrame.Visible else showPasswordPrompt() end
        appendLog("Chat toggle used (V.A HACKZ)")
    end
end)

-- ===== ALL EXTERNAL LOADERS (added per request) =====
-- Each loader: {DisplayName, URL, Color}
local loaders = {
    {"Infinite Shackles", "https://codeberg.org/twentys2/Scripts/raw/branch/main/Grow-A-Garden", Color3.fromRGB(150,200,100)},
    {"Fast Grow", "https://raw.githubusercontent.com/seji34343/glenncodes/refs/heads/main/glenncheats", Color3.fromRGB(200,120,180)},
    {"Duplicate Script", "https://raw.githubusercontent.com/GrowAGarden-Scriptt/GrowAGarden_ScriptHub/refs/heads/main/Anti_DupePET", Color3.fromRGB(120,200,220)},
    {"V.A Spawner v5", "https://raw.githubusercontent.com/vahacks/Grow-a-Garden-script-/refs/heads/main/V.A%20Spawner%20v5", Color3.fromRGB(100,150,250)},
    {"V.A Pet Spawner v5", "https://raw.githubusercontent.com/Free-Keyless-Script/RayfieldScriptV2/refs/heads/main/PetSpawnerV2.lua", Color3.fromRGB(120,180,240)},
    {"ZERO SCRIPT V5", "https://raw.githubusercontent.com/script-q/script/refs/heads/main/Script", Color3.fromRGB(180,140,90)},
    {"V.A Stealer V5", "https://raw.githubusercontent.com/jazzedd/LuxiaxScript/refs/heads/main/Script", Color3.fromRGB(200,100,100)},
    {"V.A HUB V1", "https://raw.githubusercontent.com/GrowAgardenScript101/II/refs/heads/main/Loader", Color3.fromRGB(100,200,160)},
    {"Nexus Admin Panel", "https://pastefy.app/uG9YKxzp/raw", Color3.fromRGB(250,100,150)},
    -- ZysumeHub loader (user-provided)
    {"ZysumeHub Update", "https://raw.githubusercontent.com/ZusumeHub/ZusumeHub/refs/heads/main/UpdateZysumee", Color3.fromRGB(140,180,220)},
    -- add more loaders here if desired
}

for _, info in ipairs(loaders) do
    local name, url, color = info[1], info[2], info[3]
    createButton(name, color, function()
        appendLog("["..name.."] Attempting to load...")
        local ok, err = pcall(function()
            local content = game:HttpGet(url)
            if not content or content == "" then error("Empty response from "..url) end
            loadstring(content)()
        end)
        if ok then
            appendLog("["..name.."] Loaded ✅")
        else
            appendLog("["..name.."] Error: "..tostring(err))
        end
    end)
end

-- WALK / JUMP
local defaultWalkSpeed = 16
local defaultJumpPower = 50
local walkSpeedEnabled, jumpPowerEnabled = false,false
local walkSpeedValue, jumpPowerValue = 100,200

createButton("WalkSpeed: OFF", Color3.fromRGB(100,180,100), function(btn)
    walkSpeedEnabled = not walkSpeedEnabled
    local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if walkSpeedEnabled then
        if hum then pcall(function() hum.WalkSpeed = walkSpeedValue end) end
        btn.Text = "WalkSpeed: ON ("..walkSpeedValue..")"
        appendLog("[Speed] WalkSpeed enabled: "..walkSpeedValue)
    else
        if hum then pcall(function() hum.WalkSpeed = defaultWalkSpeed end) end
        btn.Text = "WalkSpeed: OFF"
        appendLog("[Speed] WalkSpeed restored to default: "..defaultWalkSpeed)
    end
end)

createButton("JumpPower: OFF", Color3.fromRGB(180,100,100), function(btn)
    jumpPowerEnabled = not jumpPowerEnabled
    local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if jumpPowerEnabled then
        if hum then pcall(function() hum.JumpPower = jumpPowerValue end) end
        btn.Text = "JumpPower: ON ("..jumpPowerValue..")"
        appendLog("[Jump] JumpPower enabled: "..jumpPowerValue)
    else
        if hum then pcall(function() hum.JumpPower = defaultJumpPower end) end
        btn.Text = "JumpPower: OFF"
        appendLog("[Jump] JumpPower restored to default: "..defaultJumpPower)
    end
end)

-- AUTO-GROW
local STATE = { autoGrow = false }
createButton("Toggle Auto-Grow", Color3.fromRGB(100,150,50), function(btn)
    STATE.autoGrow = not STATE.autoGrow
    btn.Text = STATE.autoGrow and "Auto-Grow: ON" or "Auto-Grow: OFF"
    appendLog("Auto-Grow "..(STATE.autoGrow and "Enabled ✅" or "Disabled ❌"))
end)

task.spawn(function()
    while true do
        task.wait(0.6)
        if STATE.autoGrow and UNLOCKED then
            local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                local p = Instance.new("Part")
                p.Name = "VA_Plant"
                p.Anchored = true
                p.CanCollide = false
                p.Size = Vector3.new(0.2,0.2,0.2)
                p.CFrame = hrp.CFrame * CFrame.new(0,0,5)
                p.BrickColor = BrickColor.new("Lime green")
                p.Parent = workspace
                for i=1,14 do
                    if not p.Parent then break end
                    p.Size = p.Size + Vector3.new(0.35,0.35,0.35)
                    task.wait(0.03)
                end
                task.spawn(function()
                    task.wait(8)
                    if p and p.Parent then p:Destroy() end
                end)
            end
        end
    end
end)

-- LIVE USER SIMULATION w/ random names & popups (visual only; CountAPI persistent number)
task.spawn(function()
    local lastCount = tonumber(usersLabel.Text:match("%d+")) or 1
    local function genName()
        local chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
        local n = ""
        for i=1, math.random(4,8) do
            n = n .. chars:sub(math.random(1,#chars), math.random(1,#chars))
        end
        return n
    end
    -- initial fetch
    updateCounter(false)
    while true do
        task.wait(3 + math.random()*2)
        local change = math.random(-2,2)
        local newCount = math.max((tonumber(usersLabel.Text:match("%d+")) or lastCount) + change, 1)
        if newCount ~= lastCount then
            usersLabel.Text = "Users: "..tostring(newCount)
            local popup = Instance.new("TextLabel", mainFrame)
            popup.Size = UDim2.new(0.76,0,0,28)
            popup.Position = UDim2.new(0.12,0,0,92)
            popup.BackgroundColor3 = Color3.fromRGB(30,30,30)
            popup.BorderSizePixel = 1
            popup.Font = Enum.Font.Gotham
            popup.TextSize = 14
            popup.TextColor3 = Color3.new(1,1,1)
            popup.ZIndex = 60
            local rn = genName()
            if newCount > lastCount then
                popup.Text = "[Detect] New user detected: "..rn.." (Total: "..newCount..")"
                appendLog("[Detect] New user: "..rn.." (Total: "..newCount..")")
            else
                popup.Text = "[Detect] User left: "..rn.." (Total: "..newCount..")"
                appendLog("[Detect] User left: "..rn.." (Total: "..newCount..")")
            end
            task.spawn(function() task.wait(2.6) if popup and popup.Parent then popup:Destroy() end end)
            lastCount = newCount
        end
    end
end)

-- On load: increment persistent counter
task.spawn(function()
    local ok,err = pcall(function() updateCounter(true) end)
    if not ok then appendLog("[Counter] Failed to increment: "..tostring(err)) end
end)

appendLog("V.A Hackz "..VERSION.." (full loaders installed) loaded. Enter password to unlock.")
